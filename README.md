# **BioRAG**
## NASA Hackathon 2025 — Build a Space Biology Knowledge Engine

A Retrieval-Augmented Generation (RAG) API for NASA bioscience publications.
Built with FastAPI, Supabase, FAISS, and LLaMA 2 (via Ollama).
This project ingests publications, chunks them, builds embeddings + a FAISS index, and serves a FastAPI backend that retrieves relevant chunks and generates answers.

---

## Table of Contents

* Features
* Tech Stack
* Setup
* Supabase Configuration
* Chunking & Embedding
* Running the API
* API Endpoints
* Frontend Integration
* Notes & Troubleshooting
* Requirements
* License

---

## Features

* Ingest article metadata/links (CSV) and extract article content (HTML / PDF).
* Split articles into overlapping chunks for better context in retrieval.
* Compute embeddings with sentence-transformers and build a FAISS index.
* FastAPI endpoints for paginated article listing, article detail, retrieval + LLM answering (/api/ask/), and index reload.
* Local LLM integration via Ollama (recommended llama2-7b).
* CORS configured for React frontend integration.
* Swagger UI and ReDoc auto-generated API docs.

---

## Tech Stack

* Backend: FastAPI (Python 3.12)
* Database: Supabase (Postgres) for article metadata/storage
* Embeddings: sentence-transformers (suggested all-MiniLM-L6-v2)
* Vector Search: FAISS (IndexFlatIP for cosine similarity)
* LLM: Ollama (local llama3.1:8b)
* Frontend: React

---

## Setup

1. Clone the repository

```bash
git clone https://github.com/<your-username>/NASAHackathon2025.git
cd NASAHackathon2025
```

2. Create & activate a Python virtual environment (optional)

```bash
python -m venv venv
# macOS / Linux
source venv/bin/activate
# Windows (PowerShell)
venv\Scripts\activate
```

3. Install Python dependencies

```bash
pip install -r requirements.txt
```

4. Set environment variables (Supabase)

On macOS / Linux:

```bash
export SUPABASE_URL="https://<your-project>.supabase.co"
export SUPABASE_KEY="your-supabase-key"
```

On Windows PowerShell:

```powershell
setx SUPABASE_URL "https://<your-project>.supabase.co"
setx SUPABASE_KEY "your-supabase-key"
```

Use the service role key only on the backend. For frontend direct queries use the public/anon key with appropriate RLS policies.

---

## Supabase Configuration

Recommended articles table schema:

```sql
create table public.articles (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  title text,
  authors text,
  year text,
  abstract text,
  "URL" text,
  "OSD" json,
  error text,
  constraint articles_pkey primary key (id)
);
```

---

## Chunking & Embedding

Overview

1. Ingest raw article JSONs into data/raw/ (one JSON per article).
2. Run chunking to produce data/chunks/ (one JSON per chunk).
3. Embed chunks and build FAISS index in data/index/.

Chunking

Run:

```bash
python ingest.py
```
then
```bash
python chunk.py
```
* Default chunk size: ~250 words.
* Default overlap: 50 words.
* Each chunk JSON should include:

  * text (string)
  * section (canonical section name)
  * publication_id
  * chunk_index

Embedding & FAISS

Run:

```bash
python embed_chunks.py
```

* Uses a sentence-transformer model (all-MiniLM-L6-v2).
* Produces:

  * data/index/faiss.index
  * data/index/embeddings.npy
  * data/index/index_to_chunk.json (metadata mapping index position -> chunk preview & provenance)

Local retrieval test

```python
from retrieve_chunks import retrieve_top_k
results = retrieve_top_k("microgravity effects on bones", k=5)
print(results)
```

---

## Running the fastAPI Backend

```bash
uvicorn app:app --reload --host 127.0.0.1 --port 8000
```
or
```bash
python3 app.py
```

* Swagger UI: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
* ReDoc: [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)


---

## Running the REACT Frontend

```bash
npm install
npm start
```

* UI Dashboard: [http://127.0.0.1:3000/](http://127.0.0.1:3000/)

---


## Notes & Troubleshooting

* Updating index for FAISS:  re-run the ingest + chunking + embedding pythonfiles.
* Security: Keep Supabase service role keys on the backend only. Use RLS policies for safe direct frontend access.


## License

MIT License — see the LICENSE file.
